#include <stdio.h>
#include "toinenkonvoluutio.h"

int main() {
// Esimerkkikuva, 14 x 14 array
    float image[NUM_LAYERS][IMAGE_SIZE_Y][IMAGE_SIZE_X] = {
        {
            // First layer
            {1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1},
            {0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0},
            {1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1},
            {0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0},
            {1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1},
            {0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0},
            {0, 1, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0},
            {1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
            {1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1},
            {0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0},
            {1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0},
            {0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1},
            {0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0},
            {1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0}
        },
        {
            // Second layer
            {1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1}
        },
        {
            // Third layer
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0},
            {0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0}
        }
    };

    float kernels[NUM_KERNELS][KERNEL_SIZE][KERNEL_SIZE] = {
    // Esimerkkikernelit
    // Jos kernelin arvot ovat yhteenlaskettuna 0, kernel antaa jokaiselle pikselille samat arvot

/*
        {{-1, 0, 1}, {-2, 0, 2}, {-1, 0, 1}}, // Vertical sobel filter
        {{-1, -2, -1}, {0, 0, 0}, {1, 2, 1}}, // Horizontal sobel filter
        {{-1, 0, 1}, {-1, 0, 1}, {-1, 0, 1}}, // Vertical prewitt filter
        {{-1, -1, -1}, {0, 0, 0}, {1, 1, 1}}, // Horizontal prewitt filter
        {{1, 2, 1}, {2, 4, 2}, {1, 2, 1}}, // Gaussian filter
        {{0, 1, 0}, {1, -4, 1}, {0, 1, 0}} // Laplacian filter
*/

        // Kerneleit√§ random numeroilla
        {{-0.1, 0.2, -0.1}, {0.2, 0.4, 0.2}, {-0.1, 0.2, -0.1}},
        {{-0.2, -0.3, -0.2}, {-0.3, 3, -0.3}, {-0.2, -0.3, -0.2}},
        {{0.1, 0.2, 0.1}, {0.2, 0.5, 0.2}, {0.1, 0.2, 0.1}},
        {{-0.2, 0.1, 0.2}, {-0.2, 0.3, 0.2}, {-0.2, 0.1, 0.2}},
        {{-0.2, -1, -0.2}, {-1, 5, -1}, {-0.2, -1, -0.2}},
        {{-0.67, 0.28, -0.91},{0.53, -0.75, 0.82},{-0.14, 0.91, -0.39}},
        {{0.25, -0.15, 0.60},{-0.40, 0.80, -0.35},{0.10, -0.20, 0.55}}

    };

    // Esimerkki bias
    float bias[NUM_KERNELS] = {0.05, 0.05, 0.05, 0.05, 0.01, 0.03};

    // Kutsutaan konvoluutio
    printf("Aloitetaan konvoluutio\n");
    toinenkonvoluutio(image, kernels, bias);
    return 0;
}